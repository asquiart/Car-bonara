<h1>Persöhnliche Daten ändern</h1>

<form [formGroup]="registerForm" *ngIf="registerForm">

    <mat-tab-group dynamicHeight>
        <mat-tab label="Persöhnliche Infos">
            <div formGroupName="personalFormGroup">
                <div>

                    <div class="row">
                        <div class="col">
                            <mat-form-field class="w-100">
                                <mat-label>Anrede</mat-label>
                                <input matInput type="text" [matAutocomplete]="autoSalutation"
                                    formControlName="formOfAddress" maxlength="50" />
                                <mat-autocomplete matInput #autoSalutation="matAutocomplete">
                                    <mat-option *ngFor="let salOption of filteredSalutations" [value]="salOption">
                                        {{salOption}}</mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="col">
                            <mat-form-field style="display: block;">
                                <mat-label>Titel</mat-label>
                                <input matInput type="text" [matAutocomplete]="autoTitle" formControlName="title"
                                    maxlength="50" />
                                <mat-autocomplete #autoTitle="matAutocomplete">
                                    <mat-option *ngFor="let titleOption of filteredTitles" [value]="titleOption">
                                        {{titleOption}}</mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col">
                        <mat-form-field class="w-100">
                            <mat-label>Vorname</mat-label>
                            <input matInput formControlName="firstname" maxlength="100">
                            <mat-error *ngIf="registerForm.get('personalFormGroup.firstname')?.invalid">
                                Geben Sie einen Vornamen ein, der eine Länge von 2-50 Zeichen hat.</mat-error>
                        </mat-form-field><br>
                    </div>
                    <div class="col">
                        <mat-form-field class="w-100">
                            <mat-label>Nachname</mat-label>
                            <input matInput formControlName="lastname" maxlength="100">
                            <mat-error *ngIf="registerForm.get('personalFormGroup.lastname')?.invalid">
                                Geben Sie einen Nachnamen ein, der eine Länge von 2-50 Zeichen hat.</mat-error>
                        </mat-form-field>
                    </div>

                </div>

            </div>






        </mat-tab>
        <mat-tab label="Kontaktdaten">


            <div formGroupName="contactFormGroup">

                <cb-address-input formControlName="address"></cb-address-input>

                <div class="row">
                    <mat-form-field style="width: 94%">
                        <mat-label>Email-Adresse</mat-label>
                        <input matInput type="email" formControlName="email" maxlength="50">
                        <mat-error *ngIf="registerForm.get('accountFormGroup.email')?.invalid">
                            Geben Sie eine gültige Email-Adresse ein. Die Maximallänge beträgt 50 Zeichen.
                        </mat-error>
                    </mat-form-field>


                </div>


            </div>
        </mat-tab>
        <mat-tab label="Zahlungsinformationen & Führerschein">
            <div formGroupName="paymentFormGroup">
                <div class="row">
                    <div class="col">

                        <cb-payment-select formControlName="paymentMethod"></cb-payment-select>
                    </div>

                    <div class="col">

                        <cb-plan-select formControlName="plan"></cb-plan-select>
                    </div>
                </div>

                <div class="row">
                    <div class="col">

                        <mat-form-field>
                            <mat-label>Führerscheinnummer</mat-label>
                            <input matInput formControlName="driverlicenseNumber">
                            <mat-error>Geben Sie eine gültige Führerscheinnummer ein</mat-error>
                        </mat-form-field>

                    </div>

                    <div class="col">
                        <button mat-raised-button color="primary" (click)="changePassword()"> Passwort ändern </button>
                    </div>
                </div>
            </div>
        </mat-tab>
    </mat-tab-group>

    <button mat-raised-button color="accent" (click)="saveChanges()" [disabled]="registerForm.invalid">
        Änderungen speichern

    </button>


</form>